# ç¬¬2å¤©ï¼šç½‘ç»œçš„åˆ†ç±»å’Œæ‹“æ‰‘ç»“æ„

> "ç½‘ç»œå°±åƒåŸå¸‚çš„äº¤é€šç³»ç»Ÿï¼Œæœ‰ä¸åŒçš„è§„æ¨¡å’Œä¸åŒçš„è¿æ¥æ–¹å¼ã€‚"

## ğŸ“š ä»Šæ—¥ç›®æ ‡

- ç†è§£ç½‘ç»œçš„åˆ†ç±»ï¼ˆLANã€WANã€MANï¼‰
- æŒæ¡ç½‘ç»œæ‹“æ‰‘ç»“æ„çš„ç±»å‹
- ç¼–å†™ç¨‹åºï¼šæ‰«æå±€åŸŸç½‘è®¾å¤‡

## ğŸŒ ç½‘ç»œçš„åˆ†ç±»

### æŒ‰åœ°ç†èŒƒå›´åˆ†ç±»

#### 1. å±€åŸŸç½‘ï¼ˆLAN - Local Area Networkï¼‰

**å®šä¹‰**ï¼šè¦†ç›–èŒƒå›´è¾ƒå°çš„ç½‘ç»œï¼Œé€šå¸¸åœ¨ä¸€ä¸ªå»ºç­‘ç‰©æˆ–æ ¡å›­å†…ã€‚

**ç”Ÿæ´»ä¸­çš„ä¾‹å­**ï¼š
- ä½ å®¶é‡Œçš„WiFiç½‘ç»œ
- å…¬å¸åŠå…¬å®¤çš„ç½‘ç»œ
- ç½‘å§çš„ç½‘ç»œ
- å­¦æ ¡æœºæˆ¿çš„ç½‘ç»œ

**ç‰¹ç‚¹**ï¼š
- ğŸ“ èŒƒå›´ï¼šå‡ ç±³åˆ°å‡ å…¬é‡Œ
- ğŸš€ é€Ÿåº¦ï¼šå¾ˆå¿«ï¼ˆ100Mbps - 10Gbpsï¼‰
- ğŸ’° æˆæœ¬ï¼šä½
- ğŸ‘¥ å½’å±ï¼šä¸ªäººæˆ–å•ä½æ‰€æœ‰

```
ç±»æ¯”ç†è§£ï¼š
å±€åŸŸç½‘ = ä½ å®¶çš„å†…éƒ¨ç”µè¯ç³»ç»Ÿ
åªèƒ½åœ¨å®¶é‡Œå‡ ä¸ªæˆ¿é—´ä¹‹é—´é€šè¯
```

#### 2. åŸåŸŸç½‘ï¼ˆMAN - Metropolitan Area Networkï¼‰

**å®šä¹‰**ï¼šè¦†ç›–ä¸€ä¸ªåŸå¸‚èŒƒå›´çš„ç½‘ç»œã€‚

**ç”Ÿæ´»ä¸­çš„ä¾‹å­**ï¼š
- åŸå¸‚çš„æœ‰çº¿ç”µè§†ç½‘ç»œ
- åŸå¸‚å…¬å…±WiFiç½‘ç»œ
- åŸå¸‚ç›‘æ§ç½‘ç»œ

**ç‰¹ç‚¹**ï¼š
- ğŸ“ èŒƒå›´ï¼šå‡ åå…¬é‡Œ
- ğŸš€ é€Ÿåº¦ï¼šè¾ƒå¿«
- ğŸ’° æˆæœ¬ï¼šä¸­ç­‰
- ğŸ‘¥ å½’å±ï¼šé€šå¸¸æ˜¯è¿è¥å•†æˆ–æ”¿åºœ

```
ç±»æ¯”ç†è§£ï¼š
åŸåŸŸç½‘ = åŸå¸‚çš„å…¬äº¤ç³»ç»Ÿ
è¿æ¥åŸå¸‚å†…çš„ä¸åŒåŒºåŸŸ
```

#### 3. å¹¿åŸŸç½‘ï¼ˆWAN - Wide Area Networkï¼‰

**å®šä¹‰**ï¼šè¦†ç›–å¾ˆå¤§åœ°ç†èŒƒå›´çš„ç½‘ç»œï¼Œå¯ä»¥è·¨è¶Šå›½å®¶å’Œå¤§æ´²ã€‚

**ç”Ÿæ´»ä¸­çš„ä¾‹å­**ï¼š
- äº’è”ç½‘ï¼ˆInternetï¼‰
- è·¨å›½å…¬å¸çš„ä¸“ç”¨ç½‘ç»œ
- ç”µä¿¡è¿è¥å•†çš„éª¨å¹²ç½‘

**ç‰¹ç‚¹**ï¼š
- ğŸ“ èŒƒå›´ï¼šå‡ ç™¾åˆ°å‡ ä¸‡å…¬é‡Œ
- ğŸš€ é€Ÿåº¦ï¼šç›¸å¯¹è¾ƒæ…¢
- ğŸ’° æˆæœ¬ï¼šé«˜
- ğŸ‘¥ å½’å±ï¼šè¿è¥å•†æˆ–å¤§å‹ç»„ç»‡

```
ç±»æ¯”ç†è§£ï¼š
å¹¿åŸŸç½‘ = å›½é™…èˆªç©ºç½‘ç»œ
è¿æ¥ä¸–ç•Œå„åœ°çš„åŸå¸‚
```

### å¯¹æ¯”æ€»ç»“

| ç±»å‹ | è¦†ç›–èŒƒå›´ | ä¼ è¾“é€Ÿåº¦ | å»¶è¿Ÿ | ä¾‹å­ |
|------|----------|----------|------|------|
| LAN | 10m - 1km | æœ€å¿« | æœ€ä½ | å®¶åº­WiFi |
| MAN | 10km - 100km | è¾ƒå¿« | è¾ƒä½ | åŸå¸‚ç½‘ç»œ |
| WAN | 100km+ | è¾ƒæ…¢ | è¾ƒé«˜ | äº’è”ç½‘ |

## ğŸ”· ç½‘ç»œæ‹“æ‰‘ç»“æ„

**æ‹“æ‰‘ç»“æ„**å°±æ˜¯ç½‘ç»œä¸­å„ä¸ªè®¾å¤‡çš„è¿æ¥æ–¹å¼å’Œå¸ƒå±€å½¢çŠ¶ã€‚

### 1. æ€»çº¿å‹æ‹“æ‰‘ï¼ˆBus Topologyï¼‰

```
è®¾å¤‡A --- è®¾å¤‡B --- è®¾å¤‡C --- è®¾å¤‡D
         |                      |
       (æ€»çº¿)                (æ€»çº¿)
```

**ç‰¹ç‚¹**ï¼š
- âœ… ä¼˜ç‚¹ï¼šå¸ƒçº¿ç®€å•ï¼Œæˆæœ¬ä½
- âŒ ç¼ºç‚¹ï¼šæ€»çº¿æ–­äº†ï¼Œæ•´ä¸ªç½‘ç»œç˜«ç—ª
- ğŸ“ åº”ç”¨ï¼šæ—©æœŸä»¥å¤ªç½‘

**ç±»æ¯”**ï¼šå…¬äº¤çº¿è·¯ï¼Œæ‰€æœ‰ç«™ç‚¹éƒ½åœ¨ä¸€æ¡çº¿ä¸Š

### 2. æ˜Ÿå‹æ‹“æ‰‘ï¼ˆStar Topologyï¼‰

```
        è®¾å¤‡B
          |
è®¾å¤‡A -- äº¤æ¢æœº -- è®¾å¤‡C
          |
        è®¾å¤‡D
```

**ç‰¹ç‚¹**ï¼š
- âœ… ä¼˜ç‚¹ï¼šä¸€ä¸ªè®¾å¤‡æ•…éšœä¸å½±å“å…¶ä»–è®¾å¤‡
- âœ… ç®¡ç†æ–¹ä¾¿ï¼Œæ˜“äºæ’é”™
- âŒ ç¼ºç‚¹ï¼šä¸­å¿ƒè®¾å¤‡ï¼ˆäº¤æ¢æœºï¼‰æ•…éšœï¼Œæ•´ä¸ªç½‘ç»œç˜«ç—ª
- ğŸ“ åº”ç”¨ï¼š**ç°ä»£æœ€å¸¸ç”¨çš„æ‹“æ‰‘ç»“æ„**

**ç±»æ¯”**ï¼šå¤ªé˜³ç³»ï¼Œæ‰€æœ‰è¡Œæ˜Ÿå›´ç»•å¤ªé˜³è½¬

### 3. ç¯å‹æ‹“æ‰‘ï¼ˆRing Topologyï¼‰

```
è®¾å¤‡A --- è®¾å¤‡B
  |          |
è®¾å¤‡D --- è®¾å¤‡C
```

**ç‰¹ç‚¹**ï¼š
- âœ… ä¼˜ç‚¹ï¼šæ•°æ®ä¼ è¾“è·¯å¾„ç¡®å®š
- âŒ ç¼ºç‚¹ï¼šä¸€ä¸ªè®¾å¤‡æ•…éšœå½±å“æ•´ä¸ªç½‘ç»œ
- ğŸ“ åº”ç”¨ï¼šä»¤ç‰Œç¯ç½‘ç»œï¼ˆå·²è¾ƒå°‘ä½¿ç”¨ï¼‰

**ç±»æ¯”**ï¼šæ¥åŠ›èµ›è·‘ï¼Œæ¯ä¸ªäººä¼ é€’ç»™ä¸‹ä¸€ä¸ªäºº

### 4. ç½‘çŠ¶å‹æ‹“æ‰‘ï¼ˆMesh Topologyï¼‰

```
è®¾å¤‡A --- è®¾å¤‡B
 | \    / |
 |  \ /   |
 |  / \   |
 | /    \ |
è®¾å¤‡D --- è®¾å¤‡C
```

**ç‰¹ç‚¹**ï¼š
- âœ… ä¼˜ç‚¹ï¼šå¯é æ€§æé«˜ï¼Œæœ‰å¤šæ¡è·¯å¾„
- âŒ ç¼ºç‚¹ï¼šå¸ƒçº¿å¤æ‚ï¼Œæˆæœ¬é«˜
- ğŸ“ åº”ç”¨ï¼šå†›äº‹ç½‘ç»œã€äº’è”ç½‘éª¨å¹²

**ç±»æ¯”**ï¼šåœ°é“ç½‘ç»œï¼Œæœ‰å¤šæ¡çº¿è·¯å¯é€‰

### 5. æ ‘å‹æ‹“æ‰‘ï¼ˆTree Topologyï¼‰

```
        æ ¹äº¤æ¢æœº
        /      \
     äº¤æ¢æœºA   äº¤æ¢æœºB
     /   \      /   \
   è®¾å¤‡1 è®¾å¤‡2 è®¾å¤‡3 è®¾å¤‡4
```

**ç‰¹ç‚¹**ï¼š
- âœ… ä¼˜ç‚¹ï¼šæ˜“äºæ‰©å±•ï¼Œå±‚æ¬¡æ¸…æ™°
- âŒ ç¼ºç‚¹ï¼šæ ¹èŠ‚ç‚¹æ•…éšœå½±å“æ‰€æœ‰ä¸‹çº§
- ğŸ“ åº”ç”¨ï¼šä¼ä¸šç½‘ç»œã€æ ¡å›­ç½‘

**ç±»æ¯”**ï¼šå…¬å¸ç»„ç»‡æ¶æ„

## ğŸ”§ å®æˆ˜é¡¹ç›®ï¼šå±€åŸŸç½‘è®¾å¤‡æ‰«æå™¨

è®©æˆ‘ä»¬ç¼–å†™ä¸€ä¸ªç¨‹åºï¼Œæ‰«æä½ æ‰€åœ¨å±€åŸŸç½‘å†…çš„æ‰€æœ‰è®¾å¤‡ï¼

### ä»£ç å®ç°

```python
# day02_lan_scanner.py
# åŠŸèƒ½ï¼šæ‰«æå±€åŸŸç½‘å†…çš„æ´»è·ƒè®¾å¤‡

import socket
import ipaddress
import threading
from concurrent.futures import ThreadPoolExecutor, as_completed

def get_local_ip_and_subnet():
    """
    è·å–æœ¬æœºIPåœ°å€å’Œæ‰€åœ¨çš„å­ç½‘

    è¿”å›ï¼š
        local_ip: æœ¬æœºIPåœ°å€å­—ç¬¦ä¸²
        subnet: å­ç½‘å­—ç¬¦ä¸²ï¼ˆå¦‚ "192.168.1.0/24"ï¼‰
    """
    try:
        # åˆ›å»ºsocketè¿æ¥åˆ°å¤–éƒ¨åœ°å€ï¼Œè·å–æœ¬æœºIP
        sock = socket.socket(socket.AF_INET, socket.SOCK_DGRAM)
        sock.connect(("8.8.8.8", 80))
        local_ip = sock.getsockname()[0]
        sock.close()

        # ä»IPåœ°å€æ¨æ–­å­ç½‘ï¼ˆå‡è®¾æ˜¯/24å­ç½‘ï¼‰
        # ä¾‹å¦‚ï¼š192.168.1.100 -> 192.168.1.0/24
        ip_parts = local_ip.split('.')
        subnet = f"{ip_parts[0]}.{ip_parts[1]}.{ip_parts[2]}.0/24"

        return local_ip, subnet

    except Exception as e:
        print(f"è·å–æœ¬æœºIPå¤±è´¥ï¼š{e}")
        return None, None

def check_host(ip, timeout=0.5):
    """
    æ£€æŸ¥æŒ‡å®šIPçš„ä¸»æœºæ˜¯å¦åœ¨çº¿

    å‚æ•°ï¼š
        ip: è¦æ£€æŸ¥çš„IPåœ°å€
        timeout: è¶…æ—¶æ—¶é—´ï¼ˆç§’ï¼‰

    è¿”å›ï¼š
        å¦‚æœä¸»æœºåœ¨çº¿ï¼Œè¿”å›(ip, hostname)
        å¦‚æœä¸»æœºä¸åœ¨çº¿ï¼Œè¿”å›None

    å·¥ä½œåŸç†ï¼š
        å°è¯•è¿æ¥åˆ°ç›®æ ‡IPçš„å¸¸ç”¨ç«¯å£ï¼ˆ80ç«¯å£ï¼‰
        å¦‚æœèƒ½è¿æ¥ï¼Œè¯´æ˜ä¸»æœºåœ¨çº¿
    """
    try:
        # å°è¯•è¿æ¥åˆ°80ç«¯å£ï¼ˆHTTPç«¯å£ï¼‰
        sock = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
        sock.settimeout(timeout)

        # å°è¯•è¿æ¥
        result = sock.connect_ex((str(ip), 80))

        if result == 0:
            # è¿æ¥æˆåŠŸï¼Œå°è¯•è·å–ä¸»æœºå
            try:
                hostname = socket.gethostbyaddr(str(ip))[0]
            except:
                hostname = "æœªçŸ¥ä¸»æœºå"

            sock.close()
            return (str(ip), hostname)
        else:
            sock.close()
            return None

    except:
        return None

def ping_check(ip, timeout=0.5):
    """
    ä½¿ç”¨æ›´ç®€å•çš„æ–¹æ³•æ£€æµ‹ä¸»æœºæ˜¯å¦åœ¨çº¿
    å°è¯•å¤šä¸ªå¸¸ç”¨ç«¯å£
    """
    common_ports = [80, 443, 22, 445, 139]  # HTTP, HTTPS, SSH, SMB

    for port in common_ports:
        try:
            sock = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
            sock.settimeout(timeout)
            result = sock.connect_ex((str(ip), port))
            sock.close()

            if result == 0:
                # å°è¯•è·å–ä¸»æœºå
                try:
                    hostname = socket.gethostbyaddr(str(ip))[0]
                except:
                    hostname = "æœªçŸ¥ä¸»æœºå"

                return (str(ip), hostname, port)

        except:
            continue

    return None

def scan_network(subnet, max_workers=50):
    """
    æ‰«ææ•´ä¸ªå­ç½‘

    å‚æ•°ï¼š
        subnet: å­ç½‘åœ°å€ï¼ˆå¦‚ "192.168.1.0/24"ï¼‰
        max_workers: æœ€å¤§çº¿ç¨‹æ•°

    è¿”å›ï¼š
        æ´»è·ƒä¸»æœºåˆ—è¡¨
    """
    # è§£æå­ç½‘ï¼Œè·å–æ‰€æœ‰IPåœ°å€
    network = ipaddress.ip_network(subnet, strict=False)
    total_hosts = network.num_addresses - 2  # å‡å»ç½‘ç»œåœ°å€å’Œå¹¿æ’­åœ°å€

    print(f"ğŸ” å¼€å§‹æ‰«æå­ç½‘: {subnet}")
    print(f"ğŸ“Š æ€»å…±éœ€è¦æ‰«æ {total_hosts} ä¸ªIPåœ°å€")
    print(f"â³ è¯·ç¨å€™...\n")

    active_hosts = []
    scanned = 0

    # ä½¿ç”¨çº¿ç¨‹æ± å¹¶å‘æ‰«æ
    with ThreadPoolExecutor(max_workers=max_workers) as executor:
        # æäº¤æ‰€æœ‰æ‰«æä»»åŠ¡
        future_to_ip = {
            executor.submit(ping_check, ip): ip
            for ip in network.hosts()  # æ’é™¤ç½‘ç»œåœ°å€å’Œå¹¿æ’­åœ°å€
        }

        # å¤„ç†å®Œæˆçš„ä»»åŠ¡
        for future in as_completed(future_to_ip):
            scanned += 1
            result = future.result()

            if result:
                ip, hostname, port = result
                active_hosts.append((ip, hostname, port))
                print(f"âœ… å‘ç°è®¾å¤‡: {ip:15} | {hostname:30} | ç«¯å£: {port}")

            # æ˜¾ç¤ºè¿›åº¦
            if scanned % 10 == 0:
                progress = (scanned / total_hosts) * 100
                print(f"   è¿›åº¦: {progress:.1f}% ({scanned}/{total_hosts})", end='\r')

    return active_hosts

def display_topology(active_hosts, local_ip):
    """
    æ˜¾ç¤ºç½‘ç»œæ‹“æ‰‘ç»“æ„ï¼ˆç®€åŒ–ç‰ˆï¼‰
    """
    print("\n" + "=" * 70)
    print("ç½‘ç»œæ‹“æ‰‘ç»“æ„ï¼ˆæ˜Ÿå‹æ‹“æ‰‘ï¼‰".center(70))
    print("=" * 70)
    print()
    print("                      [è·¯ç”±å™¨/äº¤æ¢æœº]")
    print("                             |")
    print("          " + "-" * 40)

    for ip, hostname, port in active_hosts:
        marker = " (æœ¬æœº)" if ip == local_ip else ""
        print(f"          |-- [{ip}] {hostname}{marker}")

    print()
    print("=" * 70)

def main():
    """
    ä¸»å‡½æ•°
    """
    print("=" * 70)
    print("å±€åŸŸç½‘è®¾å¤‡æ‰«æå™¨".center(70))
    print("=" * 70)
    print()

    # è·å–æœ¬æœºIPå’Œå­ç½‘
    local_ip, subnet = get_local_ip_and_subnet()

    if not local_ip:
        print("âŒ æ— æ³•è·å–æœ¬æœºIPåœ°å€ï¼Œè¯·æ£€æŸ¥ç½‘ç»œè¿æ¥ï¼")
        return

    print(f"ğŸ“ æœ¬æœºIP: {local_ip}")
    print(f"ğŸŒ æ‰€åœ¨å­ç½‘: {subnet}")
    print()

    # æ‰«æç½‘ç»œ
    active_hosts = scan_network(subnet)

    print("\n" + "=" * 70)
    print(f"âœ¨ æ‰«æå®Œæˆï¼å…±å‘ç° {len(active_hosts)} å°æ´»è·ƒè®¾å¤‡")
    print("=" * 70)

    # æ˜¾ç¤ºè¯¦ç»†ä¿¡æ¯
    if active_hosts:
        print("\nğŸ“‹ æ´»è·ƒè®¾å¤‡åˆ—è¡¨ï¼š")
        print(f"{'IPåœ°å€':<15} | {'ä¸»æœºå':<30} | {'å¼€æ”¾ç«¯å£'}")
        print("-" * 70)

        for ip, hostname, port in active_hosts:
            marker = " â­" if ip == local_ip else ""
            print(f"{ip:<15} | {hostname:<30} | {port}{marker}")

        # æ˜¾ç¤ºæ‹“æ‰‘ç»“æ„
        display_topology(active_hosts, local_ip)

        # åˆ†æç½‘ç»œç±»å‹
        print("\nğŸ’¡ ç½‘ç»œåˆ†æï¼š")
        print(f"   - è¿™æ˜¯ä¸€ä¸ªå±€åŸŸç½‘ï¼ˆLANï¼‰")
        print(f"   - ä½¿ç”¨æ˜Ÿå‹æ‹“æ‰‘ç»“æ„")
        print(f"   - å…±æœ‰ {len(active_hosts)} å°è®¾å¤‡è¿æ¥åˆ°åŒä¸€ä¸ªäº¤æ¢æœº/è·¯ç”±å™¨")

    else:
        print("\nâš ï¸  æœªå‘ç°å…¶ä»–æ´»è·ƒè®¾å¤‡")

if __name__ == "__main__":
    main()
```

### è¿è¡Œç¨‹åº

```bash
cd code/day02
python day02_lan_scanner.py
```

### é¢„æœŸè¾“å‡º

```
======================================================================
                         å±€åŸŸç½‘è®¾å¤‡æ‰«æå™¨
======================================================================

ğŸ“ æœ¬æœºIP: 192.168.1.100
ğŸŒ æ‰€åœ¨å­ç½‘: 192.168.1.0/24

ğŸ” å¼€å§‹æ‰«æå­ç½‘: 192.168.1.0/24
ğŸ“Š æ€»å…±éœ€è¦æ‰«æ 254 ä¸ªIPåœ°å€
â³ è¯·ç¨å€™...

âœ… å‘ç°è®¾å¤‡: 192.168.1.1     | router.home                     | ç«¯å£: 80
âœ… å‘ç°è®¾å¤‡: 192.168.1.100   | linzhibin-MacBook              | ç«¯å£: 80
âœ… å‘ç°è®¾å¤‡: 192.168.1.105   | xiaomi-phone                   | ç«¯å£: 443

======================================================================
âœ¨ æ‰«æå®Œæˆï¼å…±å‘ç° 3 å°æ´»è·ƒè®¾å¤‡
======================================================================

ğŸ“‹ æ´»è·ƒè®¾å¤‡åˆ—è¡¨ï¼š
IPåœ°å€           | ä¸»æœºå                          | å¼€æ”¾ç«¯å£
----------------------------------------------------------------------
192.168.1.1     | router.home                    | 80
192.168.1.100   | linzhibin-MacBook              | 80 â­
192.168.1.105   | xiaomi-phone                   | 443

======================================================================
                    ç½‘ç»œæ‹“æ‰‘ç»“æ„ï¼ˆæ˜Ÿå‹æ‹“æ‰‘ï¼‰
======================================================================

                      [è·¯ç”±å™¨/äº¤æ¢æœº]
                             |
          ----------------------------------------
          |-- [192.168.1.1] router.home
          |-- [192.168.1.100] linzhibin-MacBook (æœ¬æœº)
          |-- [192.168.1.105] xiaomi-phone

======================================================================

ğŸ’¡ ç½‘ç»œåˆ†æï¼š
   - è¿™æ˜¯ä¸€ä¸ªå±€åŸŸç½‘ï¼ˆLANï¼‰
   - ä½¿ç”¨æ˜Ÿå‹æ‹“æ‰‘ç»“æ„
   - å…±æœ‰ 3 å°è®¾å¤‡è¿æ¥åˆ°åŒä¸€ä¸ªäº¤æ¢æœº/è·¯ç”±å™¨
```

## ğŸ” ä»£ç è¯¦è§£

### 1. ipaddressæ¨¡å—

Pythonçš„`ipaddress`æ¨¡å—ç”¨äºå¤„ç†IPåœ°å€å’Œç½‘ç»œï¼š

```python
import ipaddress

# åˆ›å»ºç½‘ç»œå¯¹è±¡
network = ipaddress.ip_network("192.168.1.0/24")

# è·å–ç½‘ç»œä¸­çš„æ‰€æœ‰ä¸»æœºIP
for ip in network.hosts():
    print(ip)  # 192.168.1.1, 192.168.1.2, ..., 192.168.1.254
```

### 2. å­ç½‘æ©ç  /24 æ˜¯ä»€ä¹ˆæ„æ€ï¼Ÿ

```
192.168.1.0/24 çš„å«ä¹‰ï¼š

/24 è¡¨ç¤ºå­ç½‘æ©ç æœ‰24ä¸ª1ï¼š
11111111.11111111.11111111.00000000
å³ï¼š255.255.255.0

å¯ç”¨IPèŒƒå›´ï¼š
192.168.1.1 åˆ° 192.168.1.254ï¼ˆå…±254ä¸ªï¼‰
192.168.1.0 æ˜¯ç½‘ç»œåœ°å€
192.168.1.255 æ˜¯å¹¿æ’­åœ°å€
```

### 3. ThreadPoolExecutor å¹¶å‘æ‰«æ

```python
from concurrent.futures import ThreadPoolExecutor

# åˆ›å»ºçº¿ç¨‹æ± ï¼Œæœ€å¤š50ä¸ªçº¿ç¨‹åŒæ—¶å·¥ä½œ
with ThreadPoolExecutor(max_workers=50) as executor:
    # æäº¤ä»»åŠ¡
    futures = [executor.submit(scan_ip, ip) for ip in ip_list]

    # ç­‰å¾…å®Œæˆ
    for future in as_completed(futures):
        result = future.result()
```

**ä¸ºä»€ä¹ˆè¦ç”¨å¤šçº¿ç¨‹ï¼Ÿ**
- å•çº¿ç¨‹æ‰«æ254ä¸ªIPéœ€è¦å¾ˆé•¿æ—¶é—´
- å¤šçº¿ç¨‹å¯ä»¥åŒæ—¶æ‰«æå¤šä¸ªIPï¼Œå¤§å¤§æé«˜æ•ˆç‡
- 50ä¸ªçº¿ç¨‹å¯ä»¥è®©æ‰«æé€Ÿåº¦æå‡å‡ åå€

### 4. connect_exæ–¹æ³•

```python
result = sock.connect_ex((ip, port))

# è¿”å›å€¼ï¼š
# 0 = è¿æ¥æˆåŠŸ
# å…¶ä»– = è¿æ¥å¤±è´¥ï¼ˆé”™è¯¯ç ï¼‰
```

è¿™æ¯”æ™®é€šçš„`connect()`æ–¹æ³•æ›´å¥½ï¼Œå› ä¸ºå¤±è´¥æ—¶ä¸ä¼šæŠ›å‡ºå¼‚å¸¸ã€‚

## ğŸ“ çŸ¥è¯†å°ç»“

### ä»Šå¤©å­¦åˆ°äº†ä»€ä¹ˆï¼Ÿ

1. âœ… ç½‘ç»œæŒ‰èŒƒå›´åˆ†ä¸ºLANã€MANã€WAN
2. âœ… å®¶åº­å’ŒåŠå…¬å®¤ç½‘ç»œæ˜¯å±€åŸŸç½‘ï¼ˆLANï¼‰
3. âœ… ç½‘ç»œæ‹“æ‰‘ç»“æ„æœ‰5ç§ï¼šæ€»çº¿ã€æ˜Ÿå‹ã€ç¯å‹ã€ç½‘çŠ¶ã€æ ‘å‹
4. âœ… ç°ä»£ç½‘ç»œæœ€å¸¸ç”¨æ˜Ÿå‹æ‹“æ‰‘ç»“æ„
5. âœ… å­ç½‘çš„æ¦‚å¿µå’Œè¡¨ç¤ºæ–¹æ³•
6. âœ… å¦‚ä½•æ‰«æå±€åŸŸç½‘å†…çš„è®¾å¤‡

### é‡è¦æ¦‚å¿µ

| æ¦‚å¿µ | è§£é‡Š | ä¾‹å­ |
|------|------|------|
| å±€åŸŸç½‘ | å°èŒƒå›´çš„ç½‘ç»œ | å®¶åº­WiFi |
| æ˜Ÿå‹æ‹“æ‰‘ | æ‰€æœ‰è®¾å¤‡è¿æ¥åˆ°ä¸­å¿ƒèŠ‚ç‚¹ | æ‰€æœ‰ç”µè„‘è¿æ¥åˆ°è·¯ç”±å™¨ |
| å­ç½‘ | ä¸€ä¸ªç½‘ç»œçš„å­é›† | 192.168.1.0/24 |
| ä¸»æœº | ç½‘ç»œä¸­çš„è®¾å¤‡ | ä½ çš„ç”µè„‘ã€æ‰‹æœº |

## ğŸ’ª ç»ƒä¹ é¢˜

### ç»ƒä¹ 1ï¼šè¯†åˆ«æ‹“æ‰‘ç±»å‹
è¯´å‡ºä»¥ä¸‹åœºæ™¯ä½¿ç”¨çš„æ˜¯ä»€ä¹ˆæ‹“æ‰‘ç»“æ„ï¼š
1. æ‰€æœ‰æ•™å®¤çš„ç”µè„‘éƒ½è¿æ¥åˆ°æœºæˆ¿çš„äº¤æ¢æœº
2. åœ°é“13å·çº¿å„ä¸ªç«™ç‚¹çš„è¿æ¥
3. äº’è”ç½‘éª¨å¹²ç½‘çš„è¿æ¥æ–¹å¼

### ç»ƒä¹ 2ï¼šä¿®æ”¹æ‰«æå™¨
ä¿®æ”¹ç¨‹åºï¼Œè®©å®ƒå¯ä»¥ï¼š
1. æ‰«æè‡ªå®šä¹‰çš„å­ç½‘ï¼ˆä¸æ˜¯é»˜è®¤çš„/24ï¼‰
2. æ˜¾ç¤ºæ¯ä¸ªè®¾å¤‡çš„å“åº”æ—¶é—´
3. ä¿å­˜æ‰«æç»“æœåˆ°æ–‡ä»¶

### ç»ƒä¹ 3ï¼šè®¡ç®—é¢˜
ä¸€ä¸ª192.168.1.0/24çš„ç½‘ç»œï¼š
1. å­ç½‘æ©ç æ˜¯å¤šå°‘ï¼Ÿ
2. ç¬¬ä¸€ä¸ªå¯ç”¨IPæ˜¯å¤šå°‘ï¼Ÿ
3. æœ€åä¸€ä¸ªå¯ç”¨IPæ˜¯å¤šå°‘ï¼Ÿ
4. æ€»å…±æœ‰å¤šå°‘ä¸ªå¯ç”¨IPï¼Ÿ

### ç»ƒä¹ 4ï¼šç»˜åˆ¶æ‹“æ‰‘å›¾
ç»˜åˆ¶ä½ å®¶é‡Œæˆ–å…¬å¸çš„ç½‘ç»œæ‹“æ‰‘ç»“æ„å›¾ï¼Œæ ‡æ³¨ï¼š
- æ‰€æœ‰è®¾å¤‡ï¼ˆç”µè„‘ã€æ‰‹æœºã€æ‰“å°æœºç­‰ï¼‰
- è·¯ç”±å™¨/äº¤æ¢æœº
- è¿æ¥æ–¹å¼ï¼ˆæœ‰çº¿/æ— çº¿ï¼‰

## ğŸ“š æ‰©å±•é˜…è¯»

### ä¸ºä»€ä¹ˆæ˜Ÿå‹æ‹“æ‰‘æœ€æµè¡Œï¼Ÿ

**å†å²åŸå› **ï¼š
- æ—©æœŸä½¿ç”¨æ€»çº¿å‹æ‹“æ‰‘ï¼ˆ10BASE-2åŒè½´ç”µç¼†ï¼‰
- é—®é¢˜ï¼šä¸€æ ¹çº¿æ–­äº†ï¼Œæ‰€æœ‰è®¾å¤‡éƒ½ä¸èƒ½ç”¨
- æ˜Ÿå‹æ‹“æ‰‘è§£å†³äº†è¿™ä¸ªé—®é¢˜

**ç°ä»£ä¼˜åŠ¿**ï¼š
- ä¾¿äºç®¡ç†ï¼šå¯ä»¥åœ¨äº¤æ¢æœºä¸Šç®¡ç†æ¯ä¸ªç«¯å£
- æ˜“äºæ’é”™ï¼šæŸä¸ªè®¾å¤‡æ•…éšœä¸å½±å“å…¶ä»–è®¾å¤‡
- æ˜“äºæ‰©å±•ï¼šåªéœ€åœ¨äº¤æ¢æœºä¸Šå¢åŠ ç«¯å£
- æ€§èƒ½å¥½ï¼šäº¤æ¢æœºå¯ä»¥æ™ºèƒ½è½¬å‘æ•°æ®

### å®¶åº­ç½‘ç»œçš„å®é™…æ‹“æ‰‘

```
äº’è”ç½‘
  |
å…‰çŒ«
  |
è·¯ç”±å™¨ï¼ˆWiFiï¼‰
  |
  |---- ç”µè„‘ï¼ˆæœ‰çº¿ï¼‰
  |---- æ‰‹æœºï¼ˆæ— çº¿ï¼‰
  |---- å¹³æ¿ï¼ˆæ— çº¿ï¼‰
  |---- æ™ºèƒ½ç”µè§†ï¼ˆæœ‰çº¿ï¼‰
  |---- æ™ºèƒ½éŸ³ç®±ï¼ˆæ— çº¿ï¼‰
```

è¿™æ˜¯ä¸€ä¸ªå…¸å‹çš„**æ˜Ÿå‹æ‹“æ‰‘**ï¼

### ä¼ä¸šç½‘ç»œçš„æ‹“æ‰‘

```
            æ ¸å¿ƒäº¤æ¢æœºï¼ˆæ ¹ï¼‰
              /      \
         äº¤æ¢æœºA    äº¤æ¢æœºB
         /   \       /   \
       ç”µè„‘1 ç”µè„‘2 ç”µè„‘3 ç”µè„‘4
```

è¿™æ˜¯ä¸€ä¸ª**æ ‘å‹æ‹“æ‰‘**ï¼ˆä¹Ÿå«åˆ†å±‚æ˜Ÿå‹æ‹“æ‰‘ï¼‰ï¼

## ğŸ¯ æ˜å¤©é¢„å‘Š

**ç¬¬3å¤©ï¼šOSIä¸ƒå±‚æ¨¡å‹**

æˆ‘ä»¬å°†å­¦ä¹ ï¼š
- ä»€ä¹ˆæ˜¯OSIä¸ƒå±‚æ¨¡å‹ï¼Ÿ
- æ¯ä¸€å±‚åšä»€ä¹ˆï¼Ÿ
- ä¸ºä»€ä¹ˆè¦åˆ†å±‚ï¼Ÿ
- ç¼–å†™ç¨‹åºåˆ†æå„å±‚çš„ä½œç”¨

---

ğŸ’¡ **ä»Šæ—¥é‡‘å¥**ï¼šç½‘ç»œæ‹“æ‰‘å°±åƒåŸå¸‚è§„åˆ’ï¼Œä¸åŒçš„ç»“æ„æœ‰ä¸åŒçš„ä¼˜ç¼ºç‚¹ï¼

ğŸ‘‰ [ä¸Šä¸€å¤©ï¼šè®¤è¯†è®¡ç®—æœºç½‘ç»œ](day01.md) | [è¿”å›ç›®å½•](../../README.md) | [ä¸‹ä¸€å¤©ï¼šOSIä¸ƒå±‚æ¨¡å‹](day03.md)
